<!-- https://www.w3schools.com/tags/av_event_ended.asp -->
<!DOCTYPE html>
<html lang="fr">
 	<head>
        <meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">

 		<script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>

   </head>

   <body style='margin : 0px; overflow: hidden;'>
       <audio id="myAudio" src="./audio.ogg" preload autoplay></audio>
       <audio id="son" src="./vol.mp3" preload autoplay></audio>

	  <a-scene background="color: skyblue">
    	    <!-- l'event ended ne marche pas si le son est déclaré dans les assets
            <a-assets>
    	        <audio id="son" src="./vol.mp3" preload="auto" autoplay="true" loop="false"></audio>
    	    </a-assets>
            -->

    	    <a-entity id="vol" sound="src: #son" son_loaded></a-entity>
	  </a-scene>

      <script>
          // solution 2 : addEventListener
          var aud = document.getElementById("myAudio");
          var aud2 = document.getElementById("son");
          aud.addEventListener("ended", function() {
              console.log(">>>> son terminé");
              aud.pause();
              aud2.pause();
          });


          // solution 1 : javascript
          // var aud = document.getElementById("myAudio");
          // aud.onended = function() {
          //   console.log(">>>> son terminé");
          //   aud.pause();
          // };




      </script>
  </body>
</html>
